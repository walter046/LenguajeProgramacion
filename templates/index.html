{% extends 'app.html' %}

{% block title %}SneakerShop - Tienda de Zapatillas Premium{% endblock %}

{% block customCSS %}
<style>
      /* Animaciones y estilos personalizados */
      .notification {
        animation: slideIn 0.3s ease-out;
      }
      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }
      .notification-exit {
        animation: slideOut 0.3s ease-in;
      }
      @keyframes slideOut {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }

      /* Efecto hover para tarjetas de producto */
      .product-card {
        transition: all 0.3s ease;
      }
      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      /* Estilo para el carrito */
      .cart-item {
        transition: all 0.2s ease;
      }
      .cart-item:hover {
        background-color: #f8fafc;
      }

      /* Efecto para botones */
      .btn-primary {
        transition: all 0.3s ease;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
      }

      /* Animaciones de entrada */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fadeInUp {
        animation: fadeInUp 0.6s ease-out forwards;
      }
      .animate-fadeInUp.delay-100 {
        animation-delay: 0.1s;
      }
      .animate-fadeInUp.delay-200 {
        animation-delay: 0.2s;
      }
      .animate-fadeInUp.delay-300 {
        animation-delay: 0.3s;
      }

      /* Degradado personalizado */
      .bg-gradient-sneaker {
        background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
      }
    </style>
{% endblock %}

{% block content %}
<body class="bg-gradient-sneaker min-h-screen flex flex-col">
    <!-- Mini carrito desplegable -->
    <div
      id="mini-cart"
      class="fixed top-20 right-4 bg-white rounded-lg shadow-xl z-50 w-80 max-h-[70vh] overflow-y-auto hidden border border-gray-200"
    >
      <div class="p-4 border-b border-gray-200">
        <h3
          class="text-lg font-bold text-gray-800 flex items-center justify-between"
        >
          <span>Mi Carrito</span>
          <button id="close-cart" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </h3>
      </div>
      <div id="cart-items" class="divide-y divide-gray-200">
        <!-- Los items del carrito se agregarán aquí dinámicamente -->
        <div class="p-4 text-center text-gray-500">
          <i class="fas fa-shopping-cart text-3xl mb-2"></i>
          <p>Tu carrito está vacío</p>
        </div>
      </div>
      <div class="p-4 border-t border-gray-200 bg-gray-50">
        <div class="flex justify-between mb-4">
          <span class="font-bold">Total:</span>
          <span id="cart-total" class="font-bold">S/ 0.00</span>
        </div>
        <a
          href="#"
          class="block w-full bg-blue-600 hover:bg-blue-700 text-white text-center py-2 rounded-lg transition-colors btn-primary"
        >
          Finalizar Compra
        </a>
      </div>
    </div>

    <!-- Contenedor de notificaciones -->
    <div
      id="notification-container"
      class="fixed top-4 right-4 z-50 space-y-2"
    ></div>

    <!-- Hero Section mejorada -->
    <section class="relative bg-gray-900 text-white">
      <div class="absolute inset-0 overflow-hidden">
        <img
          src="https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
          alt="Colección de zapatillas"
          class="w-full h-full object-cover opacity-70"
        />
      </div>
      <div
        class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24 md:py-32"
      >
        <div class="max-w-2xl">
          <h1 class="text-4xl md:text-5xl font-extrabold mb-6 animate-fadeInUp">
            Descubre las mejores
            <span class="text-blue-400">zapatillas</span> del mercado
          </h1>
          <p
            class="text-lg md:text-xl mb-8 text-gray-300 animate-fadeInUp delay-100"
          >
            Encuentra el par perfecto para cada ocasión. Calidad premium, estilo
            inigualable y comodidad excepcional.
          </p>
          <div
            class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 animate-fadeInUp delay-200"
          >
            <a
              href="{{ url_for('main.products') }}"
              class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg transform hover:scale-105 transition-all duration-300 text-center"
            >
              Ver Colección
            </a>
            <a
              href="#"
              class="bg-transparent hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-lg text-lg border-2 border-white transition-all duration-300 text-center"
            >
              Ofertas Especiales
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Sección de categorías mejorada -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">
          Explora Nuestras Categorías
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Encuentra las zapatillas perfectas para cada estilo y ocasión
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <a
          href="{{ url_for('main.category', name='hombre') }}"
          class="group relative overflow-hidden rounded-xl shadow-lg h-80"
        >
          <img
            src="https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"
            alt="Zapatillas para Hombre"
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
          />
          <div
            class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent flex items-end p-6"
          >
            <div>
              <h3 class="text-2xl font-bold text-white mb-1">Hombre</h3>
              <p class="text-gray-200">Estilo y rendimiento</p>
            </div>
          </div>
        </a>

        <a
          href="{{ url_for('main.category', name='mujer') }}"
          class="group relative overflow-hidden rounded-xl shadow-lg h-80"
        >
          <img
            src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
            alt="Zapatillas para Mujer"
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
          />
          <div
            class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent flex items-end p-6"
          >
            <div>
              <h3 class="text-2xl font-bold text-white mb-1">Mujer</h3>
              <p class="text-gray-200">Elegancia y comodidad</p>
            </div>
          </div>
        </a>

        <a
          href="{{ url_for('main.category', name='ninos') }}"
          class="group relative overflow-hidden rounded-xl shadow-lg h-80"
        >
          <img
            src="https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"
            alt="Zapatillas para Niños"
            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
          />
          <div
            class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent flex items-end p-6"
          >
            <div>
              <h3 class="text-2xl font-bold text-white mb-1">Niños</h3>
              <p class="text-gray-200">Diversión y calidad</p>
            </div>
          </div>
        </a>
      </div>
    </section>

    <!-- Sección de productos destacados -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto bg-white">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">
          Productos Destacados
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Los modelos más populares de esta temporada
        </p>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        <!-- Producto 1 -->
        <div
          class="product-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-100"
        >
          <div class="relative">
            <img
              src="https://images.unsplash.com/photo-1600185365483-26d7a4cc7519?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1025&q=80"
              alt="Zapatilla Deportiva X"
              class="w-full h-64 object-cover"
            />
            <div class="absolute top-2 right-2">
              <span
                class="bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full"
                >NUEVO</span
              >
            </div>
            <button
              class="absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md hover:bg-blue-500 hover:text-white transition-colors"
            >
              <i class="fas fa-heart"></i>
            </button>
          </div>
          <div class="p-4">
            <div class="flex justify-between items-start mb-2">
              <h3 class="text-lg font-semibold text-gray-900">Air Max 270</h3>
              <span class="text-sm text-gray-500">Nike</span>
            </div>
            <div class="flex items-center mb-3">
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
              <span class="text-xs text-gray-500 ml-1">(48)</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-xl font-bold text-blue-600">S/ 399.90</span>
              <button
                class="add-to-cart bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm transition-colors"
                data-id="1"
                data-name="Air Max 270"
                data-price="399.90"
                data-image="https://images.unsplash.com/photo-1600185365483-26d7a4cc7519?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1025&q=80"
              >
                <i class="fas fa-cart-plus mr-1"></i> Añadir
              </button>
            </div>
          </div>
        </div>

        <!-- Producto 2 -->
        <div
          class="product-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-100"
        >
          <div class="relative">
            <img
              src="https://images.unsplash.com/photo-1543508282-6319a3e2621f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=715&q=80"
              alt="Classic Leather"
              class="w-full h-64 object-cover"
            />
            <button
              class="absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md hover:bg-blue-500 hover:text-white transition-colors"
            >
              <i class="fas fa-heart"></i>
            </button>
          </div>
          <div class="p-4">
            <div class="flex justify-between items-start mb-2">
              <h3 class="text-lg font-semibold text-gray-900">
                Classic Leather
              </h3>
              <span class="text-sm text-gray-500">Reebok</span>
            </div>
            <div class="flex items-center mb-3">
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="far fa-star"></i>
              </div>
              <span class="text-xs text-gray-500 ml-1">(32)</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-xl font-bold text-blue-600">S/ 279.90</span>
              <button
                class="add-to-cart bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm transition-colors"
                data-id="2"
                data-name="Classic Leather"
                data-price="279.90"
                data-image="https://images.unsplash.com/photo-1543508282-6319a3e2621f?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=715&q=80"
              >
                <i class="fas fa-cart-plus mr-1"></i> Añadir
              </button>
            </div>
          </div>
        </div>

        <!-- Producto 3 -->
        <div
          class="product-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-100"
        >
          <div class="relative">
            <img
              src="https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"
              alt="Ultraboost 22"
              class="w-full h-64 object-cover"
            />
            <div class="absolute top-2 right-2">
              <span
                class="bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full"
                >-20%</span
              >
            </div>
            <button
              class="absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md hover:bg-blue-500 hover:text-white transition-colors"
            >
              <i class="fas fa-heart"></i>
            </button>
          </div>
          <div class="p-4">
            <div class="flex justify-between items-start mb-2">
              <h3 class="text-lg font-semibold text-gray-900">Ultraboost 22</h3>
              <span class="text-sm text-gray-500">Adidas</span>
            </div>
            <div class="flex items-center mb-3">
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <span class="text-xs text-gray-500 ml-1">(56)</span>
            </div>
            <div class="flex justify-between items-center">
              <div>
                <span class="text-xl font-bold text-blue-600">S/ 359.90</span>
                <span class="text-sm text-gray-500 line-through ml-2"
                  >S/ 449.90</span
                >
              </div>
              <button
                class="add-to-cart bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm transition-colors"
                data-id="3"
                data-name="Ultraboost 22"
                data-price="359.90"
                data-image="https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=687&q=80"
              >
                <i class="fas fa-cart-plus mr-1"></i> Añadir
              </button>
            </div>
          </div>
        </div>

        <!-- Producto 4 -->
        <div
          class="product-card bg-white rounded-lg shadow-md overflow-hidden border border-gray-100"
        >
          <div class="relative">
            <img
              src="https://images.unsplash.com/photo-1605408499391-6368c628ef42?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
              alt="Chuck Taylor All Star"
              class="w-full h-64 object-cover"
            />
            <button
              class="absolute bottom-2 right-2 bg-white rounded-full p-2 shadow-md hover:bg-blue-500 hover:text-white transition-colors"
            >
              <i class="fas fa-heart"></i>
            </button>
          </div>
          <div class="p-4">
            <div class="flex justify-between items-start mb-2">
              <h3 class="text-lg font-semibold text-gray-900">
                Chuck Taylor All Star
              </h3>
              <span class="text-sm text-gray-500">Converse</span>
            </div>
            <div class="flex items-center mb-3">
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
              <span class="text-xs text-gray-500 ml-1">(72)</span>
            </div>
            <div class="flex justify-between items-center">
              <span class="text-xl font-bold text-blue-600">S/ 249.90</span>
              <button
                class="add-to-cart bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm transition-colors"
                data-id="4"
                data-name="Chuck Taylor All Star"
                data-price="249.90"
                data-image="https://images.unsplash.com/photo-1605408499391-6368c628ef42?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
              >
                <i class="fas fa-cart-plus mr-1"></i> Añadir
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-12">
        <a
          href="{{ url_for('main.products') }}"
          class="inline-block bg-white border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors"
        >
          Ver Todos los Productos
        </a>
      </div>
    </section>

    <!-- Sección de características -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto bg-gray-50">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">
          ¿Por qué elegir SneakerShop?
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Ofrecemos la mejor experiencia de compra de zapatillas online
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="bg-white p-6 rounded-lg shadow-sm text-center">
          <div
            class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <i class="fas fa-truck text-blue-600 text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">Envío Rápido</h3>
          <p class="text-gray-600">
            Recibe tus zapatillas en 24-48 horas en Lima y 3-5 días a nivel
            nacional.
          </p>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm text-center">
          <div
            class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <i class="fas fa-undo-alt text-blue-600 text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">
            Devoluciones Fáciles
          </h3>
          <p class="text-gray-600">
            30 días para devoluciones o cambios si no estás satisfecho.
          </p>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm text-center">
          <div
            class="bg-blue-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"
          >
            <i class="fas fa-shield-alt text-blue-600 text-2xl"></i>
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-2">
            Productos Auténticos
          </h3>
          <p class="text-gray-600">
            Garantizamos la autenticidad de todos nuestros productos.
          </p>
        </div>
      </div>
    </section>

    <!-- Sección de testimonios -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-900 mb-4">
          Lo que dicen nuestros clientes
        </h2>
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
          Experiencias reales de amantes de las zapatillas como tú
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
          <div class="flex items-center mb-4">
            <img
              src="https://randomuser.me/api/portraits/women/43.jpg"
              alt="María G."
              class="w-12 h-12 rounded-full mr-4"
            />
            <div>
              <h4 class="font-bold text-gray-900">María G.</h4>
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
            </div>
          </div>
          <p class="text-gray-600">
            "Las Ultraboost que compré son increíblemente cómodas. El envío fue
            más rápido de lo esperado y el packaging muy cuidado. ¡Volveré a
            comprar!"
          </p>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
          <div class="flex items-center mb-4">
            <img
              src="https://randomuser.me/api/portraits/men/32.jpg"
              alt="Carlos P."
              class="w-12 h-12 rounded-full mr-4"
            />
            <div>
              <h4 class="font-bold text-gray-900">Carlos P.</h4>
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
            </div>
          </div>
          <p class="text-gray-600">
            "Excelente servicio al cliente. Tuve un problema con mi talla y me
            lo resolvieron inmediatamente. Las Air Max son exactamente como en
            las fotos."
          </p>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
          <div class="flex items-center mb-4">
            <img
              src="https://randomuser.me/api/portraits/women/65.jpg"
              alt="Lucía T."
              class="w-12 h-12 rounded-full mr-4"
            />
            <div>
              <h4 class="font-bold text-gray-900">Lucía T.</h4>
              <div class="flex text-yellow-400">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
              </div>
            </div>
          </div>
          <p class="text-gray-600">
            "Compré las Converse para mi hija y le encantaron. La calidad es
            excelente y el precio mejor que en otras tiendas. Muy recomendable."
          </p>
        </div>
      </div>
    </section>

    <!-- Newsletter -->
    <section class="py-16 px-4 sm:px-6 lg:px-8 bg-blue-600 text-white">
      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-4">Suscríbete a nuestro Newsletter</h2>
        <p class="text-lg mb-8 max-w-2xl mx-auto">
          Recibe las últimas novedades, ofertas exclusivas y descuentos
          especiales directamente en tu correo.
        </p>

        <form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
          <input
            type="email"
            placeholder="Tu correo electrónico"
            class="flex-grow px-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-300 border border-gray-300 text-white"
          />
          <button
            type="submit"
            class="bg-white text-blue-600 font-bold px-6 py-3 rounded-lg hover:bg-gray-100 transition-colors"
          >
            Suscribirme
          </button>
        </form>
      </div>
    </section>

    <script>
      // Sistema de carrito de compras
      document.addEventListener("DOMContentLoaded", function () {
        // Inicializar carrito desde localStorage o crear uno vacío
        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // Actualizar contador del carrito
        function updateCartCount() {
          const count = cart.reduce((total, item) => total + item.quantity, 0);
          document.getElementById("cart-count").textContent = count;
          localStorage.setItem("cart", JSON.stringify(cart));
        }

        // Mostrar/ocultar mini carrito
        const cartToggle = document.getElementById("cart-toggle");
        const miniCart = document.getElementById("mini-cart");
        const closeCart = document.getElementById("close-cart");

        cartToggle.addEventListener("click", function (e) {
          e.stopPropagation();
          miniCart.classList.toggle("hidden");
          if (!miniCart.classList.contains("hidden")) {
            renderCartItems();
          }
        });

        closeCart.addEventListener("click", function () {
          miniCart.classList.add("hidden");
        });

        // Cerrar carrito al hacer clic fuera
        document.addEventListener("click", function (e) {
          if (
            !miniCart.contains(e.target) &&
            e.target !== cartToggle &&
            !cartToggle.contains(e.target)
          ) {
            miniCart.classList.add("hidden");
          }
        });

        // Renderizar items del carrito
        function renderCartItems() {
          const cartItemsContainer = document.getElementById("cart-items");
          const cartTotalElement = document.getElementById("cart-total");

          if (cart.length === 0) {
            cartItemsContainer.innerHTML = `
                        <div class="p-4 text-center text-gray-500">
                            <i class="fas fa-shopping-cart text-3xl mb-2"></i>
                            <p>Tu carrito está vacío</p>
                        </div>
                    `;
            cartTotalElement.textContent = "S/ 0.00";
            return;
          }

          let itemsHTML = "";
          let total = 0;

          cart.forEach((item, index) => {
            const itemTotal = item.price * item.quantity;
            total += itemTotal;

            itemsHTML += `
                        <div class="cart-item p-4 flex items-start">
                            <img src="${item.image}" alt="${
              item.name
            }" class="w-16 h-16 object-cover rounded">
                            <div class="ml-3 flex-grow">
                                <h4 class="font-medium text-gray-900">${
                                  item.name
                                }</h4>
                                <p class="text-sm text-gray-600">S/ ${item.price.toFixed(
                                  2
                                )}</p>
                                <div class="flex items-center mt-1">
                                    <button class="change-quantity text-gray-500 hover:text-blue-600" data-index="${index}" data-change="-1">
                                        <i class="fas fa-minus text-xs"></i>
                                    </button>
                                    <span class="mx-2 text-gray-700">${
                                      item.quantity
                                    }</span>
                                    <button class="change-quantity text-gray-500 hover:text-blue-600" data-index="${index}" data-change="1">
                                        <i class="fas fa-plus text-xs"></i>
                                    </button>
                                </div>
                            </div>
                            <button class="remove-item text-gray-400 hover:text-red-500 ml-2" data-index="${index}">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;
          });

          cartItemsContainer.innerHTML = itemsHTML;
          cartTotalElement.textContent = `S/ ${total.toFixed(2)}`;

          // Agregar event listeners a los botones de cambio de cantidad
          document.querySelectorAll(".change-quantity").forEach((button) => {
            button.addEventListener("click", function () {
              const index = parseInt(this.getAttribute("data-index"));
              const change = parseInt(this.getAttribute("data-change"));

              cart[index].quantity += change;

              // Eliminar si la cantidad es 0 o menos
              if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
              }

              updateCartCount();
              renderCartItems();
              showNotification("Carrito actualizado", "success");
            });
          });

          // Agregar event listeners a los botones de eliminar
          document.querySelectorAll(".remove-item").forEach((button) => {
            button.addEventListener("click", function () {
              const index = parseInt(this.getAttribute("data-index"));
              cart.splice(index, 1);

              updateCartCount();
              renderCartItems();
              showNotification("Producto eliminado del carrito", "info");
            });
          });
        }

        // Agregar productos al carrito
        document.querySelectorAll(".add-to-cart").forEach((button) => {
          button.addEventListener("click", function () {
            const id = this.getAttribute("data-id");
            const name = this.getAttribute("data-name");
            const price = parseFloat(this.getAttribute("data-price"));
            const image = this.getAttribute("data-image");

            // Verificar si el producto ya está en el carrito
            const existingItem = cart.find((item) => item.id === id);

            if (existingItem) {
              existingItem.quantity += 1;
            } else {
              cart.push({
                id,
                name,
                price,
                image,
                quantity: 1,
              });
            }

            updateCartCount();
            renderCartItems();
            showNotification(`${name} añadido al carrito`, "success");

            // Mostrar el carrito automáticamente
            miniCart.classList.remove("hidden");
          });
        });

        // Función para mostrar notificaciones
        function showNotification(message, type = "info") {
          const container = document.getElementById("notification-container");

          const notification = document.createElement("div");
          notification.className = `notification max-w-sm w-full p-4 rounded-lg shadow-lg border-l-4 ${getNotificationStyles(
            type
          )}`;

          notification.innerHTML = `
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            ${getNotificationIcon(type)}
                        </div>
                        <div class="ml-3 flex-1">
                            <p class="text-sm font-medium">${message}</p>
                        </div>
                        <div class="ml-3 flex-shrink-0">
                            <button onclick="this.parentElement.parentElement.parentElement.classList.add('notification-exit'); setTimeout(() => this.parentElement.parentElement.parentElement.remove(), 300)" class="text-gray-400 hover:text-gray-600">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `;

          container.appendChild(notification);

          // Auto-remover después de 5 segundos
          setTimeout(() => {
            notification.classList.add("notification-exit");
            setTimeout(() => notification.remove(), 300);
          }, 5000);
        }

        function getNotificationStyles(type) {
          const styles = {
            success: "bg-green-50 border-green-400 text-green-800",
            error: "bg-red-50 border-red-400 text-red-800",
            warning: "bg-yellow-50 border-yellow-400 text-yellow-800",
            info: "bg-blue-50 border-blue-400 text-blue-800",
          };
          return styles[type] || styles["info"];
        }

        function getNotificationIcon(type) {
          const icons = {
            success:
              '<svg class="w-5 h-5 text-green-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>',
            error:
              '<svg class="w-5 h-5 text-red-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>',
            warning:
              '<svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>',
            info: '<svg class="w-5 h-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg>',
          };
          return icons[type] || icons["info"];
        }

        // Inicializar contador del carrito
        updateCartCount();
      });
    </script>

    {% with messages = get_flashed_messages(with_categories=true) %} {% if
    messages %}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          {% for category, message in messages %}
              showNotification({{ message|tojson }}, {{ category|tojson }});
          {% endfor %}
      });
    </script>
    {% endif %} {% endwith %}
  </body>
{% endblock %}